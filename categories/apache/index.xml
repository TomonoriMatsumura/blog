<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Apache on Mainroad</title><link>https://tomonorimatsumura.github.io/blog/categories/apache/</link><description>Recent content in Apache on Mainroad</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 01 Dec 2015 14:37:59 +0000</lastBuildDate><atom:link href="https://tomonorimatsumura.github.io/blog/categories/apache/index.xml" rel="self" type="application/rss+xml"/><item><title>CentOS7でmod_encodingを利用する</title><link>https://tomonorimatsumura.github.io/blog/p1093/</link><pubDate>Tue, 01 Dec 2015 14:37:59 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p1093/</guid><description>想定される環境
OS: CentOS7
Apache: 2.4系
mod_encodingをインストールする # httpd-develインストール yum -y install httpd-devel # mod_encodingをダウンロード wget http://webdav.todo.gr.jp/download/mod_encoding-20021209.tar.gz # Apache2版mod_encodingダウンロード wget http://webdav.todo.gr.jp/download/experimental/mod_encoding.c.apache2.20040616 # Apache2版mod_encodingに差し替え tar zxvf mod_encoding-20021209.tar.gz /bin/mv mod_encoding.c.apache2.20040616 mod_encoding-20021209/mod_encoding.c # iconv-hookライブラリインストール cd mod_encoding-20021209/lib ./configure &amp;amp;&amp;amp; make &amp;amp;&amp;amp; make install # ※Namazuの検索文字列の文字化け対処 cd .. # mod_encodingパッチダウンロード wget http://www.aconus.com/~oyaji/faq/mod_encoding.c-apache2.2-20060520.patch　# mod_encodingパッチ施工 patch -p0 &amp;amp;lt; mod_encoding.c-apache2.2-20060520.patch # Makefile作成 # Apache2.4はapxsのパスが「/usr/bin/apxs」なので注意! ./configure --with-apxs=/usr/bin/apxs --with-iconv-hook # Makefile編集 vi Makefile ############################## LIBS = -liconv_hook ↓ LIBS = -L/usr/local/lib -liconv_hook install-exec-local: $(APXS) -i mod_encoding.</description></item><item><title>CentOS7でmod_userdirを使用する</title><link>https://tomonorimatsumura.github.io/blog/p1075/</link><pubDate>Mon, 16 Nov 2015 15:38:58 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p1075/</guid><description>mod_userdirの設定をする vi /etc/httpd/conf.d/userdir.conf # # UserDir: The name of the directory that is appended onto a user&amp;quot;s home # directory if a ~user request is received. # # The path to the end user account &amp;quot;public_html&amp;quot; directory must be # accessible to the webserver userid. This usually means that ~userid # must have permissions of 711, ~userid/public_html must have permissions # of 755, and documents contained therein must be world-readable. # Otherwise, the client will only receive a &amp;quot;403 Forbidden&amp;quot; message.</description></item><item><title>.htaccessでディレクトリのファイル一覧を表示させる</title><link>https://tomonorimatsumura.github.io/blog/p822/</link><pubDate>Fri, 12 Jul 2013 15:17:47 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p822/</guid><description>セキュリティ上好ましくはないが、この機能を使いたい時もあるので。
以下の一文を.htaccessに書く。
Options +Indexes 参考サイト htaccessでディレクトリのファイル一覧を表示させる方法 : 週末プログラマの開発日記</description></item><item><title>CentOS6のApacheでmod_cacheを設定する</title><link>https://tomonorimatsumura.github.io/blog/p770/</link><pubDate>Mon, 18 Mar 2013 11:50:45 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p770/</guid><description>Redmineが若干早くなるかもしれないのでmod_cacheを設定してみた。
mod_cacheのインストール確認を行う 想定される環境だとmod_cacheおよびmod_disk_cacheは既にインストール済み。
httpd -M | grep cache Syntax OK cache_module (shared) disk_cache_module (shared) mod_cahceの設定を行う 「/etc/httpd/conf.d/cache.conf」にモジュールの設定を書く。マニュアルによると「CacheDirLevelsの値 X CacheDirLengthの値」は「20」以下でなければならないので注意。
vi /etc/httpd/conf.d/cache.conf # 以下を書き込む # LoadModule cache_module modules/mod_cache.so # LoadModule disk_cache_module modules/mod_disk_cache.so &amp;amp;lt;IfModule mod_cache.c&amp;amp;gt; &amp;amp;lt;IfModule mod_disk_cache.c&amp;amp;gt; # リクエストの Cache-Control: no-cache ヘッダを無視してキャッシュを返す CacheIgnoreCacheControl On # レスポンスにLast-Modifiedヘッダがなくてもキャッシュ対象にする CacheIgnoreNoLastMod On # Set-Cookie ヘッダをキャッシュしない CacheIgnoreHeaders Set-Cookie # キャッシュデータの保存先 CacheRoot /var/cache/apache # キャッシュ対象とするパスの指定 CacheEnable disk / # キャッシュデータを保管するディレクトリの階層の深さ CacheDirLevels 5 # キャッシュデータを保管するディレクトリの文字数 CacheDirLength 3 &amp;amp;lt;/IfModule&amp;amp;gt; &amp;amp;lt;/IfModule&amp;amp;gt; # キャッシュ保管ディレクトリの権限を変更しておく mkdir /var/cache/apache chown apache:apache /var/cache/apache # Apacheを再起動する service httpd restart 参考サイト Apache の mod_cache で日記の高速化に挑戦してみた – まちゅダイアリー(2010-06-26) mod_disk_cache – Apache HTTP サーバ</description></item><item><title>CentOS6でApache、PHP、MySQLの初期設定を行う</title><link>https://tomonorimatsumura.github.io/blog/p758/</link><pubDate>Sat, 16 Mar 2013 16:27:06 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p758/</guid><description>記事がバラバラになっているのでまとめておく。
Apacheの自動機動設定を行う 想定される環境だと既にApacheはインストール済み。
service httpd restart chkconfig httpd on PHPをインストールする こちらのエントリーを参考にする
MySQL+phpMyAdminをインストールする こちらのエントリーを参考にする</description></item><item><title>CentOS6でmod_userdirを使用する</title><link>https://tomonorimatsumura.github.io/blog/p745/</link><pubDate>Tue, 12 Mar 2013 17:15:14 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p745/</guid><description>動作確認は「http://localhost/~{user}/」にアクセスする。
mod_userdirの設定をする vi /etc/httpd/conf.d/userdir.conf UserDir public_html # 「~/public_html」にファイルを置くことでApacheに認識される UserDir disabled root vi /etc/httpd/conf/httpd.conf # mod_userdirを有効にする &amp;amp;lt;IfModule mod_userdir.c&amp;amp;gt; UserDir public_html &amp;amp;lt;/IfModule&amp;amp;gt; # Directory /home/*/public_htmlを修正する &amp;amp;lt;Directory /home/*/public_html&amp;amp;gt; AllowOverride All Options IncludesNoExec ExecCGI FollowSymLinks &amp;amp;lt;Limit GET POST OPTIONS&amp;amp;gt; Order allow,deny Allow from all &amp;amp;lt;/Limit&amp;amp;gt; &amp;amp;lt;LimitExcept GET POST OPTIONS&amp;amp;gt; Order deny,allow Deny from all &amp;amp;lt;/LimitExcept&amp;amp;gt; &amp;amp;lt;/Directory&amp;amp;gt; SELinuxを無効にする しばらくハマった。SELinuxが有効だとそもそもmod_userdirが使用できないらしい。
vi /etc/selinux/config # SELinuxを有効にする。 SELINUX=disabled reboot public_htmlの所有権を変更する 想定される環境だとpublic_htmlは700になっているので、/home/userを755に、pulbic_htmlを755に変更しておく。
参考サイト ユーザーディレクトリ作成(/~ユーザー名/) – CentOSで自宅サーバー構築 apacheでmod_userdir.c – BIGLOBEなんでも相談室 How to get UserDir (user specific public_html) working for apache in CentOS 6 | CentOSForge.</description></item><item><title>Apacheでサーバ情報の隠蔽を行う</title><link>https://tomonorimatsumura.github.io/blog/p521/</link><pubDate>Wed, 02 Jan 2013 10:09:03 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p521/</guid><description>Apacheのセキュリティ対策でサーバ情報の隠蔽を行った方が良いと「サーバ構築の実際がわかる Apache[実践]運用/管理」に書いてあったので調べてみた。
CentOS6.3にtelnetをインストールする 標準だとtelnetはインストールされていないのでyumでインストールする。おそらくソースからインストールすべきパッケージでもないと思う。
yum install telnet``` ### HTTPレスポンスを利用したApacheのバージョン情報の確認をする telnetでヘッダフィールドレスポンスのみ確認できる ```:bash telnet example.com 80 HEAD / HTTP/1.1 &amp;amp;lt; return &amp;amp;gt; x2 HTTP/1.1 400 Bad Request Date: Wed, 02 Jan 2013 09:38:44 GMT Server: Apache/2.2.15 (CentOS) Connection: close Content-Type: text/html; charset=iso-8859-1``` どうやらサーバ情報が表示されてしまってるみたいだ ### ServerTokensを設定する CentOS6.3はディフォルトで**ServerTokens**が**OS**になっているので**ProductOnly**に設定しなおす。ついでに404 NOT FOUNDのページ表示の時にフッタにApacheのバージョン情報を表示するオプションを設定する**ServerSignature**も**Off**に指定しておく。 ```:bash vi /etc/httpd/conf/httpd.conf /ServerTokens # ServerTokensを検索 i ServerTokens ProductOnly &amp;amp;lt; Esc &amp;amp;gt;:w /ServerSignature # ServerSignatureを検索 i ServerSignature Off &amp;amp;lt; Esc &amp;amp;gt;:wq httpd -k restart # Apacheを再起動する 参考サイト Making HTTP requests via telnet – Tony’s Place viコマンド（vimコマンド）一覧（検索・置換）</description></item><item><title>Apacheでmod_status.soを有効にする</title><link>https://tomonorimatsumura.github.io/blog/p31/</link><pubDate>Sun, 28 Oct 2012 04:35:33 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p31/</guid><description>インストールしたmod_fastcgiが動いているかどうか確認しようとして</description></item><item><title>CentOS6でApacheの設定</title><link>https://tomonorimatsumura.github.io/blog/p27/</link><pubDate>Sat, 27 Oct 2012 12:18:42 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p27/</guid><description>httpd: Could not reliably determine the server’s fully qualified domain name, using 127.0.0.1 for ServerName
エラーに対する処理
http://blog.dacelo.info/apache/entry-713.html
http://d.hatena.ne.jp/geek_it/20090824/1251131134
mod_fasitcgiのインストール手順
Makefileのディレクトリの設定とかいじる必要がある。
http://blog.riywo.com/2011/01/08/170354
http://d.hatena.ne.jp/hedachi/20090722/1248257509</description></item></channel></rss>