<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ansible on Mainroad</title><link>https://tomonorimatsumura.github.io/blog/categories/ansible/</link><description>Recent content in Ansible on Mainroad</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Thu, 04 May 2017 08:09:27 +0000</lastBuildDate><atom:link href="https://tomonorimatsumura.github.io/blog/categories/ansible/index.xml" rel="self" type="application/rss+xml"/><item><title>Ansibleで環境変数を取得する</title><link>https://tomonorimatsumura.github.io/blog/p1295/</link><pubDate>Thu, 04 May 2017 08:09:27 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p1295/</guid><description>Ansibleでデバグを行う際に環境変数を調べる必要が出てきた。
環境変数を取得する コマンド
ansible -m setup hostname # VPSに最初に接続する例 # インベントリーファイルを指定してparamikoを利用する export ANSIBLE_HOST_KEY_CHECKING=False; ansible -u root -k -i /path/to/inventory_file -m setup &amp;quot;160.xx.xxx.xxx,&amp;quot; --ask-vault-pass -c paramiko &amp;amp;gt; setup_envs 実行結果
localhost | SUCCESS =&amp;amp;gt; { &amp;quot;ansible_facts&amp;quot;: { &amp;quot;ansible_all_ipv4_addresses&amp;quot;: [ &amp;quot;172.17.0.1&amp;quot;, &amp;quot;160.16.242.225&amp;quot; ], &amp;quot;ansible_all_ipv6_addresses&amp;quot;: [ &amp;quot;2001:e42:102:1823:160:16:242:225&amp;quot;, &amp;quot;fe80::9ea3:baff:fe02:27a5&amp;quot; ], &amp;quot;ansible_apparmor&amp;quot;: { &amp;quot;status&amp;quot;: &amp;quot;disabled&amp;quot; }, &amp;quot;ansible_architecture&amp;quot;: &amp;quot;x86_64&amp;quot;, &amp;quot;ansible_bios_date&amp;quot;: &amp;quot;01/01/2011&amp;quot;, &amp;quot;ansible_bios_version&amp;quot;: &amp;quot;Bochs&amp;quot;, &amp;quot;ansible_cmdline&amp;quot;: { &amp;quot;BOOT_IMAGE&amp;quot;: &amp;quot;/vmlinuz-3.10.0-514.6.1.el7.x86_64&amp;quot;, &amp;quot;LANG&amp;quot;: &amp;quot;C&amp;quot;, &amp;quot;biosdevname&amp;quot;: &amp;quot;0&amp;quot;, &amp;quot;console&amp;quot;: &amp;quot;ttyS0,115200n8r&amp;quot;, &amp;quot;consoleblank&amp;quot;: &amp;quot;0&amp;quot;, &amp;quot;elevator&amp;quot;: &amp;quot;noop&amp;quot;, &amp;quot;net.</description></item><item><title>CentOS7でAnsibleを利用する</title><link>https://tomonorimatsumura.github.io/blog/p1156/</link><pubDate>Wed, 27 Jan 2016 08:15:14 +0000</pubDate><guid>https://tomonorimatsumura.github.io/blog/p1156/</guid><description>Ansibleを管理ホストへインストールする Ansibleのインストールには管理ホスト側にPython2.6以上、対象ホスト側には2.4以上が必要。
yum install epel-release yum install ansible Ansibleを設定する vi /etc/ansible/ansible.cfg ################################# [defaults] host_key_checking=false 対象ホストへSSH接続する もし接続エラーが出る場合は「-vvv」オプションを追加して接続したり「rm -rf /root/.ansible/tmp/*」などでキャッシュをクリアしたりする。
# 対象ホストを設定する vi /etc/ansible/hosts # This is the default ansible &amp;quot;hosts&amp;quot; file. # # It should live in /etc/ansible/hosts # # - Comments begin with the &amp;quot;#&amp;quot; character # - Blank lines are ignored # - Groups of hosts are delimited by [header] elements # - You can enter hostnames or ip addresses # - A hostname/ip can be a member of multiple groups example.</description></item></channel></rss>