---
title: Apacheでmod_status.soを有効にする
author: tomonori
type: post
date: 2012-10-28T04:35:33+00:00
url: /?p=31
categories:
  - Apache
tags:
  - httpd.conf
  - mod_fastcgi
  - mod_status.so

---
インストールしたmod_fastcgiが動いているかどうか確認しようとして

<pre>apachectl status```

と打ち込んだが

<samp>The &#8216;links&#8217; package is required for this functionality.</samp>と何かが足りないとのメッセージ。
  
とりあえずyumでelinksをインストール

<pre>yum install links```

Apacheを再起動して再び

<pre>apachectl status```

今度は

<samp>apachectl status Not Found<br /> The requested URL /server-status was not found on this server.</samp>と出た。。。

Apacheポケットリファレンスによると
  
<cite>httpd.confファイルを変更します。次のように「#」を削除して、設定ファイルのhttpd-info.confが読み込まれるようにします。server-statusハンドラ用の定義がhttpd-info.confに用意されているからです。</cite>
  
とある。
  
が、見当たらないので、[動作状況の確認 &#8211; Apacheサーバの管理 &#8211; Apache入門](http://www.adminweb.jp/apache/status/index1.html)を参考に、/usr/lib/httpd/conf/extra/httpd-info.confを作成し、以下を書き込む

<pre>&lt;Location /server-status&gt;
SetHandler server-status
Order deny,allow
Deny from all
Allow from localhost
&lt;/Location&gt;```

がしかし、これは[OS依存の記述][1]*(1)で、CentOSの場合は/ect/httpd/conf/httpd.confに書くとのこと。設定ファイルが複数あるのは今は少し混乱するので、とりあえず/usr/lib/httpd/conf/extra/httpd-info.confを削除し、httpd.confの以下を修正

<pre>#
# Optionally add a line containing the server version and virtual host
# name to server-generated pages (internal error documents, FTP directory
# listings, mod_status and mod_info output etc., but not CGI generated
# documents or custom error documents).
# Set to "EMail" to also include a mailto: link to the ServerAdmin.
# Set to one of:  On | Off | EMail
#
ServerSignature On ←コメントアウトを外す```

<pre>#
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
# Change the ".example.com" to match your domain to enable.
#
&lt;Location /server-status&gt;
    SetHandler server-status ←コメントアウトを外す
#    Order deny,allow
#    Deny from all
#    Allow from localhost
&lt;/Location&gt;```

なんとか動くようになったはなったが、FastCGIとRubyの同期がまだ取れない。。。

* * *

参照リンク
  
-elinksのインストール
  
apachectl &#8211; Apache
  
[http://objectmix.com/apache/677078-apachectl.htmlr](http://objectmix.com/apache/677078-apachectl.html)

注釈

*1
  
06-13-2008 08:48 AM / by smtalk
  
<cite>httpd.conf_2.0 is only used for Apache 2.0 and it&#8217;s renamed to httpd.conf if you have Apache 2.0</cite>

 [1]: http://www.directadmin.com/forum/showthread.php?t=26556&page=1