---
title: Apacheでサーバ情報の隠蔽を行う
author: tomonori
type: post
date: 2013-01-02T10:09:03+00:00
url: /?p=521
categories:
  - Apache
  - セキュリティ

---
Apacheのセキュリティ対策でサーバ情報の隠蔽を行った方が良いと「[サーバ構築の実際がわかる Apache[実践]運用/管理][1]」に書いてあったので調べてみた。

### CentOS6.3にtelnetをインストールする

標準だとtelnetはインストールされていないのでyumでインストールする。おそらくソースからインストールすべきパッケージでもないと思う。

```:bash
yum install telnet```

### HTTPレスポンスを利用したApacheのバージョン情報の確認をする

telnetでヘッダフィールドレスポンスのみ確認できる

```:bash
telnet example.com 80
HEAD / HTTP/1.1
&lt; return &gt; x2

HTTP/1.1 400 Bad Request
Date: Wed, 02 Jan 2013 09:38:44 GMT
Server: Apache/2.2.15 (CentOS)
Connection: close
Content-Type: text/html; charset=iso-8859-1```

どうやらサーバ情報が表示されてしまってるみたいだ

### ServerTokensを設定する

CentOS6.3はディフォルトで**ServerTokens**が**OS**になっているので**ProductOnly**に設定しなおす。ついでに404 NOT FOUNDのページ表示の時にフッタにApacheのバージョン情報を表示するオプションを設定する**ServerSignature**も**Off**に指定しておく。

```:bash
vi /etc/httpd/conf/httpd.conf
/ServerTokens # ServerTokensを検索
i
ServerTokens ProductOnly
&lt; Esc &gt;:w
/ServerSignature # ServerSignatureを検索
i
ServerSignature Off
&lt; Esc &gt;:wq
httpd -k restart # Apacheを再起動する
```

### 参考サイト

  * [Making HTTP requests via telnet &#8211; Tony&#8217;s Place][2]
  * [viコマンド（vimコマンド）一覧（検索・置換）][3]

 [1]: http://www.amazon.co.jp/dp/4774150363
 [2]: http://blog.tonycode.com/tech-stuff/http-notes/making-http-requests-via-telnet
 [3]: http://uguisu.skr.jp/Windows/vi.html