---
title: CentOS6に最新バージョンのPHPをインストールする
author: tomonori
type: post
date: 2012-12-08T17:22:48+00:00
url: /?p=395
categories:
  - CentOS6
  - PHP
tags:
  - Remi

---
### Apacheをインストールする

```:bash
# apache用のSSLモジュールもインストールしておく
yum -y install httpd httpd-devel mod_ssl
```

### PHPをインストールする

一応yumでそのままPHPをインストールしておいてそれをバージョンアップする形を取る。**Remiリポジトリが追加されていない場合は[事前に追加しておく][1]こと**。2013年1月現在は**remi-test**ではなく、**remi**でも入る。**remi-test**だとどのバージョンのPHPがインストールされるかは不明。。また**PECLコマンド**を使用する場合、**PEAR**がインストールされている必要があるので必ず入れておく。

```:bash
# 必要なライブラリを入れる
yum -y install libxml2-devel
# 5.3系を入れる
yum -y install php-devel php-gd php-mbstring php-mysql php-pdo php-pear php-xml php-imap
# 5.4系にバージョンアップする
sudo yum update php* --enablerepo=remi-test
```

インストールされているかチェック

```:bash
php -v
PHP 5.4.9 (cli) (built: Nov 22 2012 11:31:02) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies
```

### php.confを編集する

『/etc/httpd/conf.d/php.conf』を開き編集する

```:text
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps
```

### http.confのを編集する

PHPの設定はphp.confにて行う事。

<del datetime="2013-01-05T09:35:55+00:00">行数はあくまで目安。</del>

```:bash
vi /etc/httpd/conf/httpd.conf
#44行目 ヘッダ情報のセキュリティ対策（ヘッダ情報にapacheのパージョンを出力しない）
ServerTokens Prod
#277行目　サーバ名を設定します
ServerName www.oss-d.net:80
#339行目「/var/www/html」以下のディレクトリでhtaccessを有効にします
AllowOverride All
#403行目 インデックスファイルの指定 (index.phpを追加）
DirectoryIndex index.html index.html.var index.php
#537行目 エラーページのセキュリティ対策（サーバのバージョンやホスト名を出力しない）
ServerSignature Off
#760行目 デフォルトの文字コードを指定します
AddDefaultCharset UTF-8
```

### php.iniの設定を書き換える

```:bash
#yumなどのパッケージマネージャーでインストールした場合
vi /etc/php.ini

memory_limit = 32M
max_execution_time = 30
expose_php = Off
magic_quotes_gpc = Off
variables_order = GPCS
register_long_arrays = Off
register_argc_argv = Off
post_max_size = 64K
max_input_vars = 100
upload_tmp_dir = /home/uploads
upload_max_filesize = 1
display_errors = Off
display_startup_errors = Off
log_errors = On
error_reporting = E_ALL | E_STRICT
open_basedir = /srv/httpd
allow_url_fopen = Off
date.timezone = Asia/Tokyo
```

### 参考サイト

  * [PHP5.4がremi-testに来たのでyumで入れてみた][2] 
      * [PHP 5.4/インストール &#8211; OSSでLinuxサーバ構築][3] 
          * [PHPでセッションを利用するための設定 － ＠IT][4] </ul>

 [1]: ./?p=542
 [2]: http://nob-log.info/2012/03/03/php54remitest/
 [3]: http://www.oss-d.net/php/5.4s/install
 [4]: http://www.atmarkit.co.jp/flinux/rensai/buildlamp/lamp_43/43_1.html