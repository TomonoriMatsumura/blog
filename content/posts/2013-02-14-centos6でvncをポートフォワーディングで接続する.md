---
title: CentOS6でVNCをポートフォワーディングで接続する
author: tomonori
type: post
date: 2013-02-14T06:53:20+00:00
url: /?p=687
categories:
  - CentOS6
  - SSH
  - VNC

---
### SSH接続ポート番号を指定する

vncviwerコマンドではSSH接続ポート番号が指定出来ないみたいなので、「**/etc/ssh/ssh_config**」か「**~/.ssh/config**」でポート番号を指定しておく。またサーバ側の「**/etc/ssh/sshd_config**」の**AllowTcpForwarding**を**yes**にしておく。

### ポートフォワーディングで接続確認をする

ポートフォワーディングの設定がうまくいっていないとVNC Viewerが立ち上がらないので接続確認を行う。リモートのユーザーフォルダの.sshにローカルの公開鍵ファイルがないとポートフォワーディングがうまくいかないので注意

```:bash
# ssh -L [ローカルホストポート]:[リモートホスト]:[リモートホストポート] [リモートホスト] -l [リモートホストのユーザ名]

$ ssh -L 1234:192.168.1.22:5901 192.168.1.22 -l user
```

### VNC Viewerを起動する

VNC SERVERの設定をポートフォワーディング用に設定する。

```:bash
vi /etc/sysconfig/vncservers
VNCSERVERS="1:vncuser"
VNCSERVERARGS[1]="-geometry 2560x800 -localhost"
```

ローカルマシーンで以下のコマンドで起動させる。

```:bash
vncviewer -via {vncuser}@{hostname} localhost:1
```

### 参考サイト

  * [SSH ポートフォワーディングでVNCを使う][1] 
      * [[ubuntu] How do I VNC via SSH when both are not set to use the default port numbers?][2] </ul>

 [1]: http://www14.plala.or.jp/campus-note/vine_linux/server_vnc/vnc_portforwarding.html
 [2]: http://ubuntuforums.org/showthread.php?t=1207236