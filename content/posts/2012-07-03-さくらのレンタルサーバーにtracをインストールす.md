---
title: さくらのレンタルサーバーにTracをインストールする
author: tomonori
type: post
date: 2012-07-03T08:59:07+00:00
url: /?p=235
categories:
  - Trac

---
えらく嵌まったのでメモ。さくらのpythonアップデートがあると使えないかもしれないので注意。
  
今回入れたのはPython2.7.3

### インストール準備

まずはフォルダ構成を確認。

/home/[username]
  
□/local
  
-/lib
  
-/src
  
□/tmp
  
□/var
  
-/svn/repos
  
-/trac/project
  
□/www

使ったツールは
  
-Windows XP
  
-Poderosa
  
-FFFTP(フォルダやファイルの確認用)

### vartualenvのインストール

こちらの[サイト][1]を参考にvartualenvのファイルを置く場所をさくらサーバーに作る。

```:bash
mkdir -p ~/local/src
```

pipを使えるようにするために、varualenvをインストールする。
  
[このページ][2]から最新版をダウンロードしてデスクトップにでも置く。これをFFFTPで「~/local/src」フォルダにアップする。
  
そして

```:bash
cd ~/local/src
tar zxvf pypa-virtualenv-1.7.1.2-93-gf27092d.tar
cd ~/local
python /home/[username]/local/src/pypa-virtualenv-f27092d/virtualenv.py --python=/usr/local/bin/python2.7
```

この時点で**~/local/bin**以下にpythonやpipが作成される。

### Subversionのインストール

[こちらのサイト][3]を参考にインストール

```:bash
cd ~/local/src
wget http://subversion.tigris.org/downloads/subversion-1.6.16.tar.gz
wget http://subversion.tigris.org/downloads/subversion-deps-1.6.16.tar.gz
tar zxvf subversion-1.6.16.tar.gz
tar zxvf subversion-deps-1.6.16.tar.gz
cd subversion-1.6.16
./configure --with-ssl --enable-shared --enable-static --without-serf --prefix=$HOME/local
make
make install
make swig-py
make install-swig-py
```

makeコマンドを実行した後、結構時間が掛かるのでトイレ休憩なり入れると良い。そしてシンボリックリンクを通してPoderosaを再起動する

```:bash
ln -s ~/local/include/python2.7 ~/local/include/python
ln -s ~/local/lib/python2.7 ~/local/lib/python
ln -s ~/local/lib/svn-python/svn ~/local/lib/python/site-packages/svn
ln -s ~/local/lib/svn-python/libsvn ~/local/lib/python/site-packages/libsvn
```

### Babelをインストール

```:bash
easy_install Babel==0.9.5
```

### Tracをインストール

```:bash
cd ~/local
pip install trac mysql-python
```

1～2分程度でインストールされるはず

後は[こちらのサイト][3]の**Trac環境の作成**以下を参考にする。自分の環境ではsqliteが上手く使えなかったのでMySQLをディフォルトのデータベースにした。

### その他注意

  * リポジトリのソースが文字化けする場合は[trac.iniの設定をいじる][4] 
      * tracの動作がもっさりしている場合は、[cssや画像データにシンボリックリンクを通す][5] 
          * htdocsフォルダはtracのバージョンによって異なるので適宜探す。**ver0.13**だと**~/local/lib/python2.7/site-packages/trac/htdocs** </ul> 
            ### 参考サイト
            
              * [TracInstall – The Trac Project][6] 
                  * [ウノウラボ by Zynga Japan: 2009年版Python開発環境を整えよう][1] 
                      * [virtualenv 1.8.4 : Python Package Index][2] 
                          * [TracJaInstall – attosoft.info Trac][3] 
                              * [Tracのリポジトリブラウザで文字化け &#8211; 道ばたに仰ぐ][4] 
                                  * [tracの高速化 &#8211; World Wide Wonderful][5] </ul>

 [1]: http://labs.unoh.net/2009/12/2009python.html
 [2]: http://pypi.python.org/pypi/virtualenv/
 [3]: http://attosoft.info/trac/wiki/TracJaInstall
 [4]: http://d.hatena.ne.jp/taisuke_h/20071109/1194598962
 [5]: http://d.hatena.ne.jp/orangehat/20080421
 [6]: http://trac.edgewall.org/wiki/TracInstall