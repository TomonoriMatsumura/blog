---
title: Seleniumでコマンドラインでページソースを取得する
author: tomonori
type: post
date: 2017-02-14T10:48:26+00:00
url: /?p=1223
categories:
  - CentOS7
  - Python
  - Selenium

---
Selenium、Pythonの設定方法は『**CentOS7にSeleniuimをインストールする**』を参考にする。

### スクリプトの書き方

```:python
import sys
import os
import codecs
from pyvirtualdisplay import Display
from selenium import webdriver                                                               
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities               

display = Display(visible=0, size=(1024, 768))
display.start()


args = sys.argv
url = args[1]
save_dir = args[2]
file_name = args[3]


firefox_capabilities = DesiredCapabilities.FIREFOX                                           
firefox_capabilities["marionette"] = True
firefox_capabilities["binary"] = "/usr/bin/firefox"


driver = webdriver.Firefox(capabilities=firefox_capabilities)
driver.get(url)                                               
html = driver.page_source

completeName = os.path.join(save_dir, file_name) 
file_object = codecs.open(completeName, "w", "utf-8")                                       

file_object.write(html)
file_object.close()

print driver.title
driver.close()
```

### スクリプトを実行する

```:bash
# python script_file url file_dir file_name

python get_page_title_by_cli.py http://yahoo.co.jp "/home/user/" "yahoo.html"
```